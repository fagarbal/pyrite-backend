<doctype html>
<html>
<head>
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script>
	'use strict';
	const Server = {
		run : (socket) => {
			this.socket = socket();

			return new Promise((resolve) => {
				this.socket.on('methods', (methods) => {
					for (let method of methods) {
						const callback = (...args) => {
							return new Promise((resolve) => {
								this.socket.on(method, resolve);
								this.socket.emit(method, method, ...args);
							});
						};

						this[method] = callback.bind(this);
					}
					resolve(this);
				});
			});
		}
	};

	Server.run(io).then((server) => {
		server.getNumbers().then((data) => {
			console.log(data)
		});
		server.sum(1,2).then((data) => {
			console.log(data)
		});

		server.formatName('Fabio','Garcia', 'Balbuena').then((data) => {
			console.log(data)
		});
	});


</script>
</head>
<body>
	
</body>
</html>